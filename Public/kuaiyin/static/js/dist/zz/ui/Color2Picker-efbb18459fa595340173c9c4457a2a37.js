define("zz/ui/Color2Picker",["jquery.color","zz/plugins/input","jquery/jquery/1.7.2/jquery","zz/utils/objs","zz/utils/types","zz/core/Class","zz/utils/asserts","zz/ui/base/Panel","http://www.mayicy.cn/Public/kuaiyin/static/js/dist/zz/ui/jquery.tmpl","zz/plugins/actionMap","./utils/colorConvert","zz/extends/single","zz/utils/keyCode"],function(a){"use strict";function b(){var a=[[0,0,0,100],[0,0,0,90],[0,0,0,80],[0,0,0,70],[0,0,0,60],[0,0,0,50],[0,0,0,40],[0,0,0,30],[0,0,0,20],[0,0,0,10],[0,0,0,0],[0,0,20,0],[0,0,40,0],[0,0,60,0],[0,0,100,0],[0,20,100,0],[0,20,20,0],[0,20,40,0],[0,40,0,0],[0,40,20,0],[0,40,80,0],[0,40,40,0],[0,40,60,0],[0,60,40,0],[0,60,60,0],[0,60,80,0],[0,60,100,0],[0,80,40,0],[0,100,0,0],[0,100,60,0],[0,100,100,0],[0,0,60,20],[0,20,0,20],[0,20,60,20],[0,40,20,20],[0,40,0,20],[0,40,60,20],[20,20,0,0],[20,40,0,0],[20,60,0,0],[20,0,60,0],[0,60,20,20],[0,60,40,20],[0,60,80,20],[20,80,0,0],[20,0,20,0],[20,40,0,20],[20,0,60,20],[20,60,0,20],[20,0,40,20],[20,0,20,20],[0,0,20,40],[0,0,40,40],[20,80,0,20],[20,0,0,20],[0,20,0,40],[0,20,40,40],[0,40,20,40],[40,60,0,0],[0,60,0,40],[40,100,0,0],[0,60,60,40],[40,40,0,0],[40,0,100,0],[20,40,0,40],[40,0,40,0],[20,0,20,40],[20,0,40,40],[40,80,0,20],[20,0,0,40],[40,40,0,20],[40,0,0,0],[0,0,20,60],[0,20,20,60],[0,20,40,60],[0,40,0,60],[60,80,0,0],[60,60,0,0],[60,40,0,0],[40,60,0,40],[40,20,0,40],[20,40,0,60],[60,80,0,20],[20,0,0,60],[40,0,20,40],[40,40,0,60],[0,0,20,80],[40,0,20,60],[60,40,0,40],[60,0,40,20],[60,0,60,20],[60,0,20,20],[20,0,0,80],[60,0,40,40],[60,0,20,0],[100,100,0,0],[100,0,0,0],[100,0,100,0],[100,20,0,0]],b='<div style="background: none repeat scroll 0% 0% {{rgb}}" data-cmyk="{{cmyk}}" class="ui-color2-item" ></div>',c="";return a.forEach(function(a){var d=f.cmyk2rgb({c:a[0],m:a[1],y:a[2],k:a[3]});c+=b.replace("{{rgb}}",d).replace("{{cmyk}}",a.join(","))}),c}a("jquery.color"),a("zz/plugins/input");var c=(a("zz/utils/objs"),a("zz/core/Class")),d=a("jquery/jquery/1.7.2/jquery"),e=a("zz/ui/base/Panel"),f=a("./utils/colorConvert"),g=a("zz/extends/single"),h=a("zz/utils/keyCode"),i=b(),j=" <div class='ui-panel ui-color2-wrap'><div class='ui-color2-content oh clearfix'>"+i+"</div><div class='ui-color2-cmyk'><div class='ui-color2-select'></div><div class='ui-color2-cmyk-item'>C：<input  type='text' data-type='c' class='ui-color2-c' /></div><div class='ui-color2-cmyk-item'>M：<input  type='text' data-type='m' class='ui-color2-m' /></div><div class='ui-color2-cmyk-item'>Y：<input  type='text' data-type='y' class='ui-color2-y' /></div><div class='ui-color2-cmyk-item'>K：<input  type='text' data-type='k' class='ui-color2-k' /></div><button class='ui-dialog-btn ui-color2-btn' style='display:none'>确定</button></div></div>",k=c(e).defState("SELECT").attr({DEFAULT_OPTS:{appendTo:document.body,append:null,innerHTML:"",blankToClose:!0,closeToDispose:!1},TMPL:j}).init(function(a){this.superInit(a),this.$seleColorBox,this._color="#000000",this._cmyk={c:0,m:0,y:0,k:0},this._create()}).method({_create:function(){return this.$target=d(j),this.$seleColorBox=this.$target.find(".ui-color2-select"),this.triggerState("CREATE"),this},open:function(a){return this.superMethod("open"),a&&this.setOffset(a),this._isOpen=!0,this},close:function(){return this.superMethod("close"),this._isOpen=!1,this},isOpen:function(){return this._isOpen},select:function(){this.triggerState("SELECT"),this.close()},_bindEvent:function(){var a=this;this.$target.find(".ui-color2-item").on("hover.color2picker",function(b){var c=d(b.target).attr("data-cmyk");a.setCMYK(c),b.stopPropagation()}).on("click.color2picker",function(b){a.select(),b.stopPropagation()}),this.$target.find("input").onInput(function(a){var b=d(a.target),c=b.val().trim().substr(0,3);b.setInputVal(c),""===c.trim()&&(c=0),this._cmyk[b.attr("data-type")]=c,this._color=f.cmyk2rgb(this._cmyk),this.$seleColorBox.css("background-color",this._color)}.bind(this)).on("keydown",function(b){b.keyCode==h.get("enter")&&(a.select(),b.preventDefault())}),this.$target.find(".ui-color2-btn").on("keydown.color2picker",function(b){b.keyCode==h.get("enter")&&(a.select(),b.preventDefault())}).on("click.color2picker",function(b){a.select(),b.preventDefault()}),this.superMethod("_bindEvent")},_unBindEvent:function(){this.$target.find(".ui-color2-item").off(".color2picker"),this.$target.find("input").unInput().off("keydown"),this.$target.find(".ui-color2-btn").off(".color2picker"),this.superMethod("_bindEvent")},getRGB:function(){return this._color},getCMYK:function(){return this._cmyk},getStrCMYK:function(){var a=this._cmyk;return""+a.c+","+a.m+","+a.y+","+a.k},setRGB:function(a){this._color=d.Color(a).toHexString(),this._cmyk=f.rgb2cmyk(this._color);for(var b in this._cmyk)this.$target.find(".ui-color2-"+b).setInputVal(this._cmyk[b]);this.$seleColorBox.css("background-color",a)},setCMYK:function(a){a=a.split(","),this._cmyk={c:a[0],m:a[1],y:a[2],k:a[3]},this._color=f.cmyk2rgb(this._cmyk);for(var b in this._cmyk)this.$target.find(".ui-color2-"+b).setInputVal(this._cmyk[b]);this.$seleColorBox.css("background-color",this._color)},setOffset:function(a){this.$target.offset({left:a.offset().left,top:a.offset().top+a.height()+5})}}).wrap(g);return k});