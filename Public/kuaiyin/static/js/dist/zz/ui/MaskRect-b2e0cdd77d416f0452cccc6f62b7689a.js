define("zz/ui/MaskRect",["zz/utils/objs","zz/utils/types","./Mask","zz/core/Class","zz/utils/asserts","jquery/jquery/1.7.2/jquery","zz/ui/base/Panel","http://www.mayicy.cn/Public/kuaiyin/static/js/dist/zz/ui/jquery.tmpl","zz/plugins/actionMap"],function(a){"use strict";var b=a("zz/utils/objs"),c=a("./Mask"),d=a("zz/core/Class"),e=a("jquery/jquery/1.7.2/jquery"),f=d().attr({DEFAULT_OPTS:{color:"#000",opacity:.6,zIndex:1e4,isAnim:!1,canClick:!0,closeToDispose:!0,rect:[0,0,0,0],focusRect:null,focusBorder:"3px solid red"}}).init(function(a){this._opts=b.extend({},this.DEFAULT_OPTS,a),this.rect=this._opts.rect,this.maskList={},this.$focusRect,this._createMasks(),this._opts.focusRect&&this._createFocusRect()}).method({_createMasks:function(){var a=["top","bottom","left","right","bottom"];this._opts.canClick||a.push("main");var d=this.maskList,e=this;a.forEach(function(a){var f=b.extend({},e._opts);switch(a){case"left":f.width="unAutoSize",f.height="unAutoSize";break;case"right":f.height="unAutoSize";break;case"top":f.height="unAutoSize";break;case"main":f.width="unAutoSize",f.height="unAutoSize",f.opacity=0}d[a]=new c(f)})},_createFocusRect:function(){this.$focusRect=e("<div class='ui-mask-rect'></div>").css({position:"fixed",border:this._opts.focusBorder,zIndex:this._opts.zIndex+1})},open:function(){b.forEach(this.maskList,function(a){a.open()}),this._setMaskList(),this.$focusRect&&(this.$focusRect.appendTo(document.body),this.setFocusRect(this._opts.focusRect))},close:function(){b.forEach(this.maskList,function(a){a.close()}),this.$focusRect&&this.$focusRect.remove(),this.focusInterval&&clearInterval(this.focusInterval),this.destroy()},setFocusRect:function(a,b){function c(){setTimeout(function(){d.$focusRect&&d.$focusRect.css("borderColor","transparent")},100),setTimeout(function(){d.$focusRect&&d.$focusRect.css("border",d._opts.focusBorder)},300),setTimeout(function(){d.$focusRect&&d.$focusRect.css("borderColor","transparent")},600),setTimeout(function(){d.$focusRect&&d.$focusRect.css("border",d._opts.focusBorder)},900)}var d=this;if(this.$focusRect||(this._createFocusRect(),this.$focusRect.appendTo(document.body)),this.$focusRect.css({left:a[0],top:a[1],width:a[2],height:a[3]}),b){var e=this.$focusRect.children("img");e[0]?e.attr("src",b):(e="<img style='width:100%;height:100%' src='"+b+"' />",this.$focusRect.append(e))}else this.$focusRect.html("");this.focusInterval||(c(),this.focusInterval=setInterval(c,1e3))},setRect:function(a){this.rect=a,this._setMaskList()},_setMaskList:function(){var a={left:this.rect[0],top:this.rect[1],width:this.rect[2],height:this.rect[3]},c={left:0,top:0,height:a.top},d={left:0,top:a.top+a.height},e={left:0,top:a.top,width:a.left,height:a.height},f={left:a.left+a.width,top:a.top,height:a.height},g={left:e,top:c,right:f,bottom:d,main:a};b.forEach(this.maskList,function(a,b){a.$target.css(g[b])})},_bindEvent:function(){},_unBindEvent:function(){}});return f});