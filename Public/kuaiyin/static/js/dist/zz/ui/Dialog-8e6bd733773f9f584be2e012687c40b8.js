define("zz/ui/Dialog",["http://www.mayicy.cn/Public/kuaiyin/static/js/dist/zz/ui/jquery.tmpl","jquery.easing","zz/utils/objs","zz/utils/types","zz/core/Class","zz/utils/asserts","zz/ui/base/Panel","zz/plugins/actionMap","jquery/jquery/1.7.2/jquery","./Mask"],function(a){"use strict";a("http://www.mayicy.cn/Public/kuaiyin/static/js/dist/zz/ui/jquery.tmpl"),a("jquery.easing");var b=(a("zz/utils/objs"),a("zz/utils/types"),a("zz/core/Class")),c=a("zz/ui/base/Panel"),d=a("jquery/jquery/1.7.2/jquery"),e=a("./Mask"),f=b(c).attr({DEFAULT_OPTS:{innerHTML:"",footHTML:"",titleHTML:"",className:"",append:null,appendTo:document.body,title:"对话框",hasMask:!0,hasTitle:!0,hasClose:!0,hasFoot:!0,width:"auto",height:"auto",bodyWidth:"auto",bodyHeight:"auto",left:null,top:null,isCenter:!0,isAnim:!0,animTime:300,animType:"",zIndex:1e5,maskZindex:1e4,blankToClose:!1,closeToDispose:!0,maskOpacity:.7,actions:{close:function(){this.close()}},footBtns:{close:"关闭"}},TMPL:'<div class="ui-dialog pr ${className}">{{if hasClose}}<a href="javascript:;" data-action="close" class="ui-close-btn">×</a>{{/if}}{{if hasTitle}}<div class="ui-dialog-head">${title}</div> {{html titleHTML}}{{/if}}<div class="ui-dialog-body">{{html innerHTML}}</div>{{if hasFoot}}<div class="ui-dialog-foot">{{html footHTML}}</div>{{/if}}</div>'}).init(function(a){this.superInit(a),this._mask=null,this._create()}).method({_create:function(){if(this.$target=d.tmpl(this.TMPL,this._opts),this.$target.css({zIndex:this._opts.zIndex,position:"fixed",width:this._opts.width,height:this._opts.height,left:"50%",top:"50%",backgroundColor:"white"}).children(".ui-dialog-body").css({width:this._opts.bodyWidth,height:this._opts.bodyHeight}),this._opts.append&&this.$target.children(".ui-dialog-body").append(this._opts.append),this._opts.hasMask&&(this._mask=new e({closeToDispose:this._opts.closeToDispose,opacity:this._opts.maskOpacity,zIndex:this._opts.maskZindex})),this._opts.hasFoot&&this._opts.footBtns){var a=this.$target.find(".ui-dialog-foot"),b=this._opts.footBtns;for(var c in b)a.append("<button class='ml10 ui-dialog-btn' data-action='"+c+"'>"+b[c]+"</button>")}return this.triggerState("CREATE"),this},open:function(){function a(a){var b,c,e,f,g;try{return b=d(parent.document.body).scrollTop(),c=d(parent.window).height(),e=a.$target.height(),f=d(window.frameElement).offset().top,g=b+c/2-e/2-f,0>g?0:g}catch(h){return 100}}return this.$target||this._create(),this._mask&&this._mask.open(),this.$target.appendTo(this._opts.appendTo),this.$target.css(this._opts.isCenter?{marginLeft:-this.$target.width()/2,marginTop:-this.$target.height()/2}:{left:this._opts.left||0,top:this._opts.top||0}),/[?&]iframe=1/.test(location.href)&&(this.$target.css({marginTop:0,top:a(this)}),this._opts.isAnim=!1),this._opts.isAnim?this.$target.css("top",-this.$target.height()).show().animate({top:this._opts.isCenter?"50%":this._opts.top||0},this._opts.animTime,this._opts.animType,function(){this._bindEvent(),this.triggerState("OPEN")}.bind(this)):(this.$target.show(),this._bindEvent(),this.triggerState("OPEN")),this},close:function(){return this._opts.isAnim?this.$target.animate({top:-this.$target.height()},this._opts.animTime,this._opts.animType,function(){this._mask&&this._mask.close(),this.superMethod("close")}.bind(this)):(this._mask&&this._mask.close(),this.superMethod("close")),this}});return f});